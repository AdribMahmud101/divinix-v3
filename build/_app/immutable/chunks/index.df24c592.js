let M;const q=new Uint8Array(16);function G(){if(!M&&(M=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!M))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return M(q)}const y=[];for(let n=0;n<256;++n)y.push((n+256).toString(16).slice(1));function L(n,f=0){return y[n[f+0]]+y[n[f+1]]+y[n[f+2]]+y[n[f+3]]+"-"+y[n[f+4]]+y[n[f+5]]+"-"+y[n[f+6]]+y[n[f+7]]+"-"+y[n[f+8]]+y[n[f+9]]+"-"+y[n[f+10]]+y[n[f+11]]+y[n[f+12]]+y[n[f+13]]+y[n[f+14]]+y[n[f+15]]}const X=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T={randomUUID:X};function k(n,f,F){if(T.randomUUID&&!f&&!n)return T.randomUUID();n=n||{};const u=n.random||(n.rng||G)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,f){F=F||0;for(let v=0;v<16;++v)f[F+v]=u[v];return f}return L(u)}var Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function tt(n){if(n.__esModule)return n;var f=n.default;if(typeof f=="function"){var F=function u(){return this instanceof u?Reflect.construct(f,arguments,this.constructor):f.apply(this,arguments)};F.prototype=f.prototype}else F={};return Object.defineProperty(F,"__esModule",{value:!0}),Object.keys(n).forEach(function(u){var v=Object.getOwnPropertyDescriptor(n,u);Object.defineProperty(F,u,v.get?v:{enumerable:!0,get:function(){return n[u]}})}),F}var W={exports:{}};const rt={},et=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"})),C=tt(et);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(n){(function(){var f="input is invalid type",F=typeof window=="object",u=F?window:{};u.JS_SHA256_NO_WINDOW&&(F=!1);var v=!F&&typeof self=="object",m=!u.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;m?u=Q:v&&(u=self);var K=!u.JS_SHA256_NO_COMMON_JS&&!0&&n.exports,B=!u.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",s="0123456789abcdef".split(""),$=[-2147483648,8388608,32768,128],A=[24,16,8,0],R=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],j=["hex","array","digest","arrayBuffer"],p=[];(u.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),B&&(u.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var z=function(t,h){return function(a){return new b(h,!0).update(a)[t]()}},J=function(t){var h=z("hex",t);m&&(h=Y(h,t)),h.create=function(){return new b(t)},h.update=function(x){return h.create().update(x)};for(var a=0;a<j.length;++a){var i=j[a];h[i]=z(i,t)}return h},Y=function(t,h){var a=C,i=C.Buffer,x=h?"sha224":"sha256",e;i.from&&!u.JS_SHA256_NO_BUFFER_FROM?e=i.from:e=function(r){return new i(r)};var o=function(r){if(typeof r=="string")return a.createHash(x).update(r,"utf8").digest("hex");if(r==null)throw new Error(f);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===i?a.createHash(x).update(e(r)).digest("hex"):t(r)};return o},V=function(t,h){return function(a,i){return new I(a,h,!0).update(i)[t]()}},P=function(t){var h=V("hex",t);h.create=function(x){return new I(x,t)},h.update=function(x,e){return h.create(x).update(e)};for(var a=0;a<j.length;++a){var i=j[a];h[i]=V(i,t)}return h};function b(t,h){h?(p[0]=p[16]=p[1]=p[2]=p[3]=p[4]=p[5]=p[6]=p[7]=p[8]=p[9]=p[10]=p[11]=p[12]=p[13]=p[14]=p[15]=0,this.blocks=p):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}b.prototype.update=function(t){if(!this.finalized){var h,a=typeof t;if(a!=="string"){if(a==="object"){if(t===null)throw new Error(f);if(B&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!B||!ArrayBuffer.isView(t)))throw new Error(f)}else throw new Error(f);h=!0}for(var i,x=0,e,o=t.length,r=this.blocks;x<o;){if(this.hashed&&(this.hashed=!1,r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),h)for(e=this.start;x<o&&e<64;++x)r[e>>2]|=t[x]<<A[e++&3];else for(e=this.start;x<o&&e<64;++x)i=t.charCodeAt(x),i<128?r[e>>2]|=i<<A[e++&3]:i<2048?(r[e>>2]|=(192|i>>6)<<A[e++&3],r[e>>2]|=(128|i&63)<<A[e++&3]):i<55296||i>=57344?(r[e>>2]|=(224|i>>12)<<A[e++&3],r[e>>2]|=(128|i>>6&63)<<A[e++&3],r[e>>2]|=(128|i&63)<<A[e++&3]):(i=65536+((i&1023)<<10|t.charCodeAt(++x)&1023),r[e>>2]|=(240|i>>18)<<A[e++&3],r[e>>2]|=(128|i>>12&63)<<A[e++&3],r[e>>2]|=(128|i>>6&63)<<A[e++&3],r[e>>2]|=(128|i&63)<<A[e++&3]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.block=r[16],this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,h=this.lastByteIndex;t[16]=this.block,t[h>>2]|=$[h&3],this.block=t[16],h>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},b.prototype.hash=function(){var t=this.h0,h=this.h1,a=this.h2,i=this.h3,x=this.h4,e=this.h5,o=this.h6,r=this.h7,c=this.blocks,d,w,_,S,l,O,U,E,N,D,H;for(d=16;d<64;++d)l=c[d-15],w=(l>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,l=c[d-2],_=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,c[d]=c[d-16]+w+c[d-7]+_<<0;for(H=h&a,d=0;d<64;d+=4)this.first?(this.is224?(E=300032,l=c[0]-1413257819,r=l-150054599<<0,i=l+24177077<<0):(E=704751109,l=c[0]-210244248,r=l-1521486534<<0,i=l+143694565<<0),this.first=!1):(w=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),_=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),E=t&h,S=E^t&a^H,U=x&e^~x&o,l=r+_+U+R[d]+c[d],O=w+S,r=i+l<<0,i=l+O<<0),w=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),_=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),N=i&t,S=N^i&h^E,U=r&x^~r&e,l=o+_+U+R[d+1]+c[d+1],O=w+S,o=a+l<<0,a=l+O<<0,w=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),_=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),D=a&i,S=D^a&t^N,U=o&r^~o&x,l=e+_+U+R[d+2]+c[d+2],O=w+S,e=h+l<<0,h=l+O<<0,w=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),_=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7),H=h&a,S=H^h&i^D,U=e&o^~e&r,l=x+_+U+R[d+3]+c[d+3],O=w+S,x=t+l<<0,t=l+O<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+t<<0,this.h1=this.h1+h<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0,this.h4=this.h4+x<<0,this.h5=this.h5+e<<0,this.h6=this.h6+o<<0,this.h7=this.h7+r<<0},b.prototype.hex=function(){this.finalize();var t=this.h0,h=this.h1,a=this.h2,i=this.h3,x=this.h4,e=this.h5,o=this.h6,r=this.h7,c=s[t>>28&15]+s[t>>24&15]+s[t>>20&15]+s[t>>16&15]+s[t>>12&15]+s[t>>8&15]+s[t>>4&15]+s[t&15]+s[h>>28&15]+s[h>>24&15]+s[h>>20&15]+s[h>>16&15]+s[h>>12&15]+s[h>>8&15]+s[h>>4&15]+s[h&15]+s[a>>28&15]+s[a>>24&15]+s[a>>20&15]+s[a>>16&15]+s[a>>12&15]+s[a>>8&15]+s[a>>4&15]+s[a&15]+s[i>>28&15]+s[i>>24&15]+s[i>>20&15]+s[i>>16&15]+s[i>>12&15]+s[i>>8&15]+s[i>>4&15]+s[i&15]+s[x>>28&15]+s[x>>24&15]+s[x>>20&15]+s[x>>16&15]+s[x>>12&15]+s[x>>8&15]+s[x>>4&15]+s[x&15]+s[e>>28&15]+s[e>>24&15]+s[e>>20&15]+s[e>>16&15]+s[e>>12&15]+s[e>>8&15]+s[e>>4&15]+s[e&15]+s[o>>28&15]+s[o>>24&15]+s[o>>20&15]+s[o>>16&15]+s[o>>12&15]+s[o>>8&15]+s[o>>4&15]+s[o&15];return this.is224||(c+=s[r>>28&15]+s[r>>24&15]+s[r>>20&15]+s[r>>16&15]+s[r>>12&15]+s[r>>8&15]+s[r>>4&15]+s[r&15]),c},b.prototype.toString=b.prototype.hex,b.prototype.digest=function(){this.finalize();var t=this.h0,h=this.h1,a=this.h2,i=this.h3,x=this.h4,e=this.h5,o=this.h6,r=this.h7,c=[t>>24&255,t>>16&255,t>>8&255,t&255,h>>24&255,h>>16&255,h>>8&255,h&255,a>>24&255,a>>16&255,a>>8&255,a&255,i>>24&255,i>>16&255,i>>8&255,i&255,x>>24&255,x>>16&255,x>>8&255,x&255,e>>24&255,e>>16&255,e>>8&255,e&255,o>>24&255,o>>16&255,o>>8&255,o&255];return this.is224||c.push(r>>24&255,r>>16&255,r>>8&255,r&255),c},b.prototype.array=b.prototype.digest,b.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),h=new DataView(t);return h.setUint32(0,this.h0),h.setUint32(4,this.h1),h.setUint32(8,this.h2),h.setUint32(12,this.h3),h.setUint32(16,this.h4),h.setUint32(20,this.h5),h.setUint32(24,this.h6),this.is224||h.setUint32(28,this.h7),t};function I(t,h,a){var i,x=typeof t;if(x==="string"){var e=[],o=t.length,r=0,c;for(i=0;i<o;++i)c=t.charCodeAt(i),c<128?e[r++]=c:c<2048?(e[r++]=192|c>>6,e[r++]=128|c&63):c<55296||c>=57344?(e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|c&63):(c=65536+((c&1023)<<10|t.charCodeAt(++i)&1023),e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|c&63);t=e}else if(x==="object"){if(t===null)throw new Error(f);if(B&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!B||!ArrayBuffer.isView(t)))throw new Error(f)}else throw new Error(f);t.length>64&&(t=new b(h,!0).update(t).array());var d=[],w=[];for(i=0;i<64;++i){var _=t[i]||0;d[i]=92^_,w[i]=54^_}b.call(this,h,a),this.update(w),this.oKeyPad=d,this.inner=!0,this.sharedMemory=a}I.prototype=new b,I.prototype.finalize=function(){if(b.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();b.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),b.prototype.finalize.call(this)}};var g=J();g.sha256=g,g.sha224=J(!0),g.sha256.hmac=P(),g.sha224.hmac=P(!0),K?n.exports=g:(u.sha256=g.sha256,u.sha224=g.sha224)})()})(W);var it=W.exports;const ht=Z(it),st=n=>{let f="";return new TransformStream({transform(F,u){f+=F;const v=f.split(n);v.slice(0,-1).forEach(m=>u.enqueue(m)),f=v[v.length-1]},flush(F){f&&F.enqueue(f)}})},at=n=>{let f={messages:{},currentId:null},F=null,u=null;for(const v of n)u=k(),F!==null&&(f.messages[F].childrenIds=[...f.messages[F].childrenIds,u]),f.messages[u]={...v,id:u,parentId:F,childrenIds:[]},F=u;return f.currentId=u,f},nt=n=>{const f=String(n).trim().toLowerCase();return`https://www.gravatar.com/avatar/${ht(f)}`};export{Z as a,at as b,Q as c,nt as g,st as s,k as v};
