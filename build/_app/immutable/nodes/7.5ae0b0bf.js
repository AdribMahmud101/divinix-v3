import{s as Bt,n as nt,r as Ht,h as Ye,o as Ot,b as St,l as Ct}from"../chunks/scheduler.0545783f.js";import{S as Rt,i as zt,g as n,s as y,h as o,j as g,c as w,F as R,f,k as s,a as ye,x as l,H as de,A as Z,G as qt,J as Dt,m as We,n as Ze,o as ot,l as rt,K as Et,L as Vt}from"../chunks/index.3f9f9994.js";import{e as Je}from"../chunks/each.2de3855a.js";import{t as at,O as Ft,b as Yt,d as Jt,k as Tt}from"../chunks/Toaster.svelte_svelte_type_style_lang.c00290f2.js";import{g as Mt}from"../chunks/navigation.0331cceb.js";import{s as Wt}from"../chunks/index.df24c592.js";import{p as Zt}from"../chunks/stores.60c9e64f.js";function At(r,t,e){const a=r.slice();return a[33]=t[e],a[34]=t,a[35]=e,a}function Lt(r,t,e){const a=r.slice();return a[36]=t[e],a[37]=t,a[38]=e,a}function Gt(r){let t,e;return{c(){t=Et("svg"),e=Et("path"),this.h()},l(a){t=Vt(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var d=g(t);e=Vt(d,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),g(e).forEach(f),d.forEach(f),this.h()},h(){s(e,"fill-rule","evenodd"),s(e,"d","M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"),s(e,"clip-rule","evenodd"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"viewBox","0 0 24 24"),s(t,"fill","currentColor"),s(t,"class","w-8")},m(a,d){ye(a,t,d),l(t,e)},p:nt,d(a){a&&f(t)}}}function Xt(r){let t,e;return{c(){t=n("img"),this.h()},l(a){t=o(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ct(t.src,e=r[3])||s(t,"src",e),s(t,"alt","modelfile profile"),s(t,"class","rounded-full w-20 h-20 object-cover")},m(a,d){ye(a,t,d)},p(a,d){d[0]&8&&!Ct(t.src,e=a[3])&&s(t,"src",e)},d(a){a&&f(t)}}}function Pt(r){let t,e,a,d,x='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',m,k,I;function b(){r[22].call(e,r[37],r[38])}function H(){return r[23](r[38])}return{c(){t=n("div"),e=n("input"),a=y(),d=n("button"),d.innerHTML=x,m=y(),this.h()},l(p){t=o(p,"DIV",{class:!0});var v=g(t);e=o(v,"INPUT",{class:!0,placeholder:!0}),a=w(v),d=o(v,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),R(d)!=="svelte-1tpj1wu"&&(d.innerHTML=x),m=w(v),v.forEach(f),this.h()},h(){s(e,"class","px-3 py-1.5 text-sm w-full bg-transparent outline-none border-r dark:border-gray-600"),s(e,"placeholder","Write a prompt suggestion (e.g. Who are you?)"),s(d,"class","px-2"),s(d,"type","button"),s(t,"class","flex border dark:border-gray-600 rounded-lg")},m(p,v){ye(p,t,v),l(t,e),de(e,r[36].content),l(t,a),l(t,d),l(t,m),k||(I=[Z(e,"input",b),Z(d,"click",H)],k=!0)},p(p,v){r=p,v[0]&1024&&e.value!==r[36].content&&de(e,r[36].content)},d(p){p&&f(t),k=!1,Ht(I)}}}function Nt(r){let t,e,a,d,x=r[33]+"",m,k,I,b;function H(){r[24].call(e,r[33])}return{c(){t=n("div"),e=n("input"),a=y(),d=n("div"),m=We(x),k=y(),this.h()},l(p){t=o(p,"DIV",{class:!0});var v=g(t);e=o(v,"INPUT",{type:!0}),a=w(v),d=o(v,"DIV",{class:!0});var C=g(d);m=Ze(C,x),C.forEach(f),k=w(v),v.forEach(f),this.h()},h(){s(e,"type","checkbox"),s(d,"class","capitalize"),s(t,"class","flex space-x-2 text-sm")},m(p,v){ye(p,t,v),l(t,e),e.checked=r[11][r[33]],l(t,a),l(t,d),l(d,m),l(t,k),I||(b=Z(e,"change",H),I=!0)},p(p,v){r=p,v[0]&2048&&(e.checked=r[11][r[33]]),v[0]&2048&&x!==(x=r[33]+"")&&ot(m,x)},d(p){p&&f(t),I=!1,b()}}}function Ut(r){let t,e,a="Pull Progress",d,x,m,k=(r[5]??0)+"",I,b,H,p,v;return{c(){t=n("div"),e=n("div"),e.textContent=a,d=y(),x=n("div"),m=n("div"),I=We(k),b=We("%"),H=y(),p=n("div"),v=We(r[4]),this.h()},l(C){t=o(C,"DIV",{class:!0});var c=g(t);e=o(c,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-13fvdnm"&&(e.textContent=a),d=w(c),x=o(c,"DIV",{class:!0});var P=g(x);m=o(P,"DIV",{class:!0,style:!0});var M=g(m);I=Ze(M,k),b=Ze(M,"%"),M.forEach(f),P.forEach(f),H=w(c),p=o(c,"DIV",{class:!0,style:!0});var D=g(p);v=Ze(D,r[4]),D.forEach(f),c.forEach(f),this.h()},h(){s(e,"class","text-sm font-semibold mb-2"),s(m,"class","dark:bg-gray-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full"),rt(m,"width",Math.max(15,r[5]??0)+"%"),s(x,"class","w-full rounded-full dark:bg-gray-800"),s(p,"class","mt-1 text-xs dark:text-gray-500"),rt(p,"font-size","0.5rem"),s(t,"class","my-2")},m(C,c){ye(C,t,c),l(t,e),l(t,d),l(t,x),l(x,m),l(m,I),l(m,b),l(t,H),l(t,p),l(p,v)},p(C,c){c[0]&32&&k!==(k=(C[5]??0)+"")&&ot(I,k),c[0]&32&&rt(m,"width",Math.max(15,C[5]??0)+"%"),c[0]&16&&ot(v,C[4])},d(C){C&&f(t)}}}function jt(r){let t,e=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){t=n("div"),t.innerHTML=e,this.h()},l(a){t=o(a,"DIV",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1gf8wym"&&(t.innerHTML=e),this.h()},h(){s(t,"class","ml-1.5 self-center")},m(a,d){ye(a,t,d)},d(a){a&&f(t)}}}function Kt(r){let t,e,a,d,x,m,k="My Modelfiles",I,b,H='<div class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg></div> <div class="self-center font-medium text-sm">Back</div>',p,v,C,c,P,M,D,F,S,E,K,Q,Me="Name*",Ie,ce,Y,Ce,$,te,Ae="Model Tag Name*",De,ue,J,Ee,le,u,B="Description*",fe,z,V,se,_,W,he='<div class="self-center text-sm font-semibold">Modelfile</div>',Ve,ee,re,it="Content*",Ge,Te,G,Xe,ne,oe,ve,dt="Prompt suggestions",Ke,ae,ct='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg>',Qe,ge,$e,ie,pe,ut="Categories",et,me,tt,Le,we,q,_e,ft="Save & Update",lt,Pe,st,ht;function vt(i,T){return i[3]?Xt:Gt}let Ne=vt(r),X=Ne(r),xe=Je(r[10]),A=[];for(let i=0;i<xe.length;i+=1)A[i]=Pt(Lt(r,xe,i));let ke=Je(Object.keys(r[11])),L=[];for(let i=0;i<ke.length;i+=1)L[i]=Nt(At(r,ke,i));let N=r[5]!==null&&Ut(r),O=r[0]&&jt();return{c(){t=n("div"),e=n("div"),a=n("div"),d=n("input"),x=y(),m=n("div"),m.textContent=k,I=y(),b=n("button"),b.innerHTML=H,p=y(),v=n("hr"),C=y(),c=n("form"),P=n("div"),M=n("div"),D=n("button"),X.c(),S=y(),E=n("div"),K=n("div"),Q=n("div"),Q.textContent=Me,Ie=y(),ce=n("div"),Y=n("input"),Ce=y(),$=n("div"),te=n("div"),te.textContent=Ae,De=y(),ue=n("div"),J=n("input"),Ee=y(),le=n("div"),u=n("div"),u.textContent=B,fe=y(),z=n("div"),V=n("input"),se=y(),_=n("div"),W=n("div"),W.innerHTML=he,Ve=y(),ee=n("div"),re=n("div"),re.textContent=it,Ge=y(),Te=n("div"),G=n("textarea"),Xe=y(),ne=n("div"),oe=n("div"),ve=n("div"),ve.textContent=dt,Ke=y(),ae=n("button"),ae.innerHTML=ct,Qe=y(),ge=n("div");for(let i=0;i<A.length;i+=1)A[i].c();$e=y(),ie=n("div"),pe=n("div"),pe.textContent=ut,et=y(),me=n("div");for(let i=0;i<L.length;i+=1)L[i].c();tt=y(),N&&N.c(),Le=y(),we=n("div"),q=n("button"),_e=n("div"),_e.textContent=ft,lt=y(),O&&O.c(),this.h()},l(i){t=o(i,"DIV",{class:!0});var T=g(t);e=o(T,"DIV",{class:!0});var h=g(e);a=o(h,"DIV",{class:!0});var U=g(a);d=o(U,"INPUT",{type:!0,accept:!0}),x=w(U),m=o(U,"DIV",{class:!0,"data-svelte-h":!0}),R(m)!=="svelte-14jlof8"&&(m.textContent=k),I=w(U),b=o(U,"BUTTON",{class:!0,"data-svelte-h":!0}),R(b)!=="svelte-undlmf"&&(b.innerHTML=H),p=w(U),v=o(U,"HR",{class:!0}),C=w(U),c=o(U,"FORM",{class:!0});var j=g(c);P=o(j,"DIV",{class:!0});var gt=g(P);M=o(gt,"DIV",{class:!0});var pt=g(M);D=o(pt,"BUTTON",{class:!0,type:!0});var mt=g(D);X.l(mt),mt.forEach(f),pt.forEach(f),gt.forEach(f),S=w(j),E=o(j,"DIV",{class:!0});var Ue=g(E);K=o(Ue,"DIV",{class:!0});var je=g(K);Q=o(je,"DIV",{class:!0,"data-svelte-h":!0}),R(Q)!=="svelte-7d74a3"&&(Q.textContent=Me),Ie=w(je),ce=o(je,"DIV",{});var _t=g(ce);Y=o(_t,"INPUT",{class:!0,placeholder:!0}),_t.forEach(f),je.forEach(f),Ce=w(Ue),$=o(Ue,"DIV",{class:!0});var He=g($);te=o(He,"DIV",{class:!0,"data-svelte-h":!0}),R(te)!=="svelte-adac66"&&(te.textContent=Ae),De=w(He),ue=o(He,"DIV",{});var bt=g(ue);J=o(bt,"INPUT",{class:!0,placeholder:!0}),bt.forEach(f),He.forEach(f),Ue.forEach(f),Ee=w(j),le=o(j,"DIV",{class:!0});var Be=g(le);u=o(Be,"DIV",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-17hu182"&&(u.textContent=B),fe=w(Be),z=o(Be,"DIV",{});var yt=g(z);V=o(yt,"INPUT",{class:!0,placeholder:!0}),yt.forEach(f),Be.forEach(f),se=w(j),_=o(j,"DIV",{class:!0});var Oe=g(_);W=o(Oe,"DIV",{class:!0,"data-svelte-h":!0}),R(W)!=="svelte-oybxeh"&&(W.innerHTML=he),Ve=w(Oe),ee=o(Oe,"DIV",{class:!0});var Se=g(ee);re=o(Se,"DIV",{class:!0,"data-svelte-h":!0}),R(re)!=="svelte-2imxe0"&&(re.textContent=it),Ge=w(Se),Te=o(Se,"DIV",{});var wt=g(Te);G=o(wt,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),g(G).forEach(f),wt.forEach(f),Se.forEach(f),Oe.forEach(f),Xe=w(j),ne=o(j,"DIV",{class:!0});var Re=g(ne);oe=o(Re,"DIV",{class:!0});var ze=g(oe);ve=o(ze,"DIV",{class:!0,"data-svelte-h":!0}),R(ve)!=="svelte-cktctz"&&(ve.textContent=dt),Ke=w(ze),ae=o(ze,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),R(ae)!=="svelte-5pubto"&&(ae.innerHTML=ct),ze.forEach(f),Qe=w(Re),ge=o(Re,"DIV",{class:!0});var xt=g(ge);for(let be=0;be<A.length;be+=1)A[be].l(xt);xt.forEach(f),Re.forEach(f),$e=w(j),ie=o(j,"DIV",{class:!0});var qe=g(ie);pe=o(qe,"DIV",{class:!0,"data-svelte-h":!0}),R(pe)!=="svelte-1w33zjy"&&(pe.textContent=ut),et=w(qe),me=o(qe,"DIV",{class:!0});var kt=g(me);for(let be=0;be<L.length;be+=1)L[be].l(kt);kt.forEach(f),qe.forEach(f),tt=w(j),N&&N.l(j),Le=w(j),we=o(j,"DIV",{class:!0});var It=g(we);q=o(It,"BUTTON",{class:!0,type:!0});var Fe=g(q);_e=o(Fe,"DIV",{class:!0,"data-svelte-h":!0}),R(_e)!=="svelte-5s0nx6"&&(_e.textContent=ft),lt=w(Fe),O&&O.l(Fe),Fe.forEach(f),It.forEach(f),j.forEach(f),U.forEach(f),h.forEach(f),T.forEach(f),this.h()},h(){s(d,"type","file"),d.hidden=!0,s(d,"accept","image/*"),s(m,"class","text-2xl font-semibold mb-6"),s(b,"class","flex space-x-1"),s(v,"class","my-3 dark:border-gray-700"),s(D,"class",F=(r[3]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200"),s(D,"type","button"),s(M,"class","self-center"),s(P,"class","flex justify-center my-4"),s(Q,"class","text-sm font-semibold mb-2"),s(Y,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(Y,"placeholder","Name your modelfile"),Y.required=!0,s(K,"class","flex-1"),s(te,"class","text-sm font-semibold mb-2"),s(J,"class","px-3 py-1.5 text-sm w-full bg-transparent disabled:text-gray-500 border dark:border-gray-600 outline-none rounded-lg"),s(J,"placeholder","Add a model tag name"),J.value=r[7],J.disabled=!0,J.required=!0,s($,"class","flex-1"),s(E,"class","my-2 flex space-x-2"),s(u,"class","text-sm font-semibold mb-2"),s(V,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(V,"placeholder","Add a short description about what this modelfile does"),V.required=!0,s(le,"class","my-2"),s(W,"class","flex w-full justify-between"),s(re,"class","text-xs font-semibold mb-2"),s(G,"class","px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg"),s(G,"placeholder",`FROM llama2
PARAMETER temperature 1
SYSTEM """
You are Mario from Super Mario Bros, acting as an assistant.
"""`),s(G,"rows","6"),G.required=!0,s(ee,"class","mt-2"),s(_,"class","my-2"),s(ve,"class","self-center text-sm font-semibold"),s(ae,"class","p-1 px-3 text-xs flex rounded transition"),s(ae,"type","button"),s(oe,"class","flex w-full justify-between mb-2"),s(ge,"class","flex flex-col space-y-1"),s(ne,"class","my-2"),s(pe,"class","text-sm font-semibold mb-2"),s(me,"class","grid grid-cols-4"),s(ie,"class","my-2"),s(_e,"class","self-center font-medium"),s(q,"class",Pe="text-sm px-3 py-2 transition rounded-xl "+(r[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex"),s(q,"type","submit"),q.disabled=r[0],s(we,"class","my-2 flex justify-end"),s(c,"class","flex flex-col"),s(a,"class","max-w-2xl mx-auto w-full px-3 md:px-0 my-10"),s(e,"class","py-2.5 flex flex-col justify-between w-full"),s(t,"class","min-h-screen w-full flex justify-center dark:text-white")},m(i,T){ye(i,t,T),l(t,e),l(e,a),l(a,d),r[13](d),l(a,x),l(a,m),l(a,I),l(a,b),l(a,p),l(a,v),l(a,C),l(a,c),l(c,P),l(P,M),l(M,D),X.m(D,null),l(c,S),l(c,E),l(E,K),l(K,Q),l(K,Ie),l(K,ce),l(ce,Y),de(Y,r[6]),l(E,Ce),l(E,$),l($,te),l($,De),l($,ue),l(ue,J),l(c,Ee),l(c,le),l(le,u),l(le,fe),l(le,z),l(z,V),de(V,r[8]),l(c,se),l(c,_),l(_,W),l(_,Ve),l(_,ee),l(ee,re),l(ee,Ge),l(ee,Te),l(Te,G),de(G,r[9]),l(c,Xe),l(c,ne),l(ne,oe),l(oe,ve),l(oe,Ke),l(oe,ae),l(ne,Qe),l(ne,ge);for(let h=0;h<A.length;h+=1)A[h]&&A[h].m(ge,null);l(c,$e),l(c,ie),l(ie,pe),l(ie,et),l(ie,me);for(let h=0;h<L.length;h+=1)L[h]&&L[h].m(me,null);l(c,tt),N&&N.m(c,null),l(c,Le),l(c,we),l(we,q),l(q,_e),l(q,lt),O&&O.m(q,null),st||(ht=[Z(d,"change",r[14]),Z(d,"change",r[15]),Z(b,"click",r[16]),Z(D,"click",r[17]),Z(Y,"input",r[18]),Z(V,"input",r[19]),Z(G,"input",r[20]),Z(ae,"click",r[21]),Z(c,"submit",qt(r[25]))],st=!0)},p(i,T){if(Ne===(Ne=vt(i))&&X?X.p(i,T):(X.d(1),X=Ne(i),X&&(X.c(),X.m(D,null))),T[0]&8&&F!==(F=(i[3]?"":"p-6")+" rounded-full dark:bg-gray-700 border border-dashed border-gray-200")&&s(D,"class",F),T[0]&64&&Y.value!==i[6]&&de(Y,i[6]),T[0]&128&&J.value!==i[7]&&(J.value=i[7]),T[0]&256&&V.value!==i[8]&&de(V,i[8]),T[0]&512&&de(G,i[9]),T[0]&1024){xe=Je(i[10]);let h;for(h=0;h<xe.length;h+=1){const U=Lt(i,xe,h);A[h]?A[h].p(U,T):(A[h]=Pt(U),A[h].c(),A[h].m(ge,null))}for(;h<A.length;h+=1)A[h].d(1);A.length=xe.length}if(T[0]&2048){ke=Je(Object.keys(i[11]));let h;for(h=0;h<ke.length;h+=1){const U=At(i,ke,h);L[h]?L[h].p(U,T):(L[h]=Nt(U),L[h].c(),L[h].m(me,null))}for(;h<L.length;h+=1)L[h].d(1);L.length=ke.length}i[5]!==null?N?N.p(i,T):(N=Ut(i),N.c(),N.m(c,Le)):N&&(N.d(1),N=null),i[0]?O||(O=jt(),O.c(),O.m(q,null)):O&&(O.d(1),O=null),T[0]&1&&Pe!==(Pe="text-sm px-3 py-2 transition rounded-xl "+(i[0]?" cursor-not-allowed bg-gray-100 dark:bg-gray-800":" bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800")+" flex")&&s(q,"class",Pe),T[0]&1&&(q.disabled=i[0])},i:nt,o:nt,d(i){i&&f(t),r[13](null),X.d(),Dt(A,i),Dt(L,i),N&&N.d(),O&&O.d(),st=!1,Ht(ht)}}}function Qt(r,t,e){let a,d,x,m;Ye(r,Yt,u=>e(28,a=u)),Ye(r,Jt,u=>e(29,d=u)),Ye(r,Tt,u=>e(30,x=u)),Ye(r,Zt,u=>e(31,m=u));let k=!1,I,b,H=null,p="",v=null,C=!1,c=null,P="",M="",D="",F="",S=[{content:""}],E={character:!1,assistant:!1,writing:!1,productivity:!1,programming:!1,"data analysis":!1,lifestyle:!1,education:!1,business:!1};Ot(()=>{if(e(7,M=m.url.searchParams.get("tag")),M){c=x.filter(u=>u.tagName===M)[0],console.log(c),e(3,H=c.imageUrl),e(6,P=c.title),e(8,D=c.desc),e(9,F=c.content),e(10,S=c.suggestionPrompts.length!=0?c.suggestionPrompts:[{content:""}]);for(const u of c.categories)e(11,E[u.toLowerCase()]=!0,E)}else Mt("/modelfiles")});const K=async u=>{await Tt.set(x.map(B=>B.tagName===u.tagName?u:B)),localStorage.setItem("modelfiles",JSON.stringify(x))},Q=async()=>{if(e(0,k=!0),Object.keys(E).filter(u=>E[u]).length==0&&at.error("Uh-oh! It looks like you missed selecting a category. Please choose one to complete your modelfile."),P!==""&&D!==""&&F!==""&&Object.keys(E).filter(u=>E[u]).length>0){const u=await fetch(`${(d==null?void 0:d.API_BASE_URL)??Ft}/create`,{method:"POST",headers:{"Content-Type":"text/event-stream",...d.authHeader&&{Authorization:d.authHeader},...a&&{Authorization:`Bearer ${localStorage.token}`}},body:JSON.stringify({name:M,modelfile:F})});if(u){const B=u.body.pipeThrough(new TextDecoderStream).pipeThrough(Wt(`
`)).getReader();for(;;){const{value:fe,done:z}=await B.read();if(z)break;try{let V=fe.split(`
`);for(const se of V)if(se!==""){console.log(se);let _=JSON.parse(se);if(console.log(_),_.error)throw _.error;if(_.detail)throw _.detail;_.status&&(!_.digest&&!_.status.includes("writing")&&!_.status.includes("sha256")?(at.success(_.status),_.status==="success"&&(C=!0)):_.digest&&(e(4,p=_.digest),_.completed?e(5,v=Math.round(_.completed/_.total*1e3)/10):e(5,v=100)))}}catch(V){console.log(V),at.error(V)}}}C&&(await K({tagName:M,imageUrl:H,title:P,desc:D,content:F,suggestionPrompts:S.filter(B=>B.content!==""),categories:Object.keys(E).filter(B=>E[B])}),await Mt("/modelfiles"))}e(0,k=!1),C=!1};function Me(u){St[u?"unshift":"push"](()=>{I=u,e(1,I)})}function Ie(){b=this.files,e(2,b)}const ce=()=>{let u=new FileReader;u.onload=B=>{let fe=`${B.target.result}`;const z=new Image;z.src=fe,z.onload=function(){const V=document.createElement("canvas"),se=V.getContext("2d"),_=z.width/z.height;let W,he;_>1?(W=100*_,he=100):(W=100,he=100/_),V.width=100,V.height=100;const Ve=(100-W)/2,ee=(100-he)/2;se.drawImage(z,Ve,ee,W,he);const re=V.toDataURL("image/jpeg");e(3,H=re),e(2,b=null)}},b&&b.length>0&&["image/gif","image/jpeg","image/png"].includes(b[0].type)?u.readAsDataURL(b[0]):(console.log(`Unsupported File Type '${b[0].type}'.`),e(2,b=null))},Y=()=>{history.back()},Ce=()=>{I.click()};function $(){P=this.value,e(6,P)}function te(){D=this.value,e(8,D)}function Ae(){F=this.value,e(9,F)}const De=()=>{(S.length===0||S.at(-1).content!=="")&&e(10,S=[...S,{content:""}])};function ue(u,B){u[B].content=this.value,e(10,S)}const J=u=>{S.splice(u,1),e(10,S)};function Ee(u){E[u]=this.checked,e(11,E)}return[k,I,b,H,p,v,P,M,D,F,S,E,Q,Me,Ie,ce,Y,Ce,$,te,Ae,De,ue,J,Ee,()=>{Q()}]}class nl extends Rt{constructor(t){super(),zt(this,t,Qt,Kt,Bt,{},null,[-1,-1])}}export{nl as component};
